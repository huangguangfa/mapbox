<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="../../../mapbox-gl-js/dist/mapbox-gl-dev.js"></script>
  <link rel="stylesheet" href="../../../mapbox-gl-js/dist/mapbox-gl.css">
</head>
<body>
  <div id="map" style="width:800px;height:800px"></div>
</body>
</html>

<script>
  const mapContainer = document.getElementById('map');
  const drawBtn = document.getElementById('draw');
  let map
  function initMap(){
    map = new mapboxgl.Map({
      "container": mapContainer,
      "center": [116.46, 39.92],
      zoom: 17,
      "style": "mapbox://styles/huangguangfa/clghetttb003g01o1dvhwxt1n",
      "accessToken": "pk.eyJ1IjoiaHVhbmdndWFuZ2ZhIiwiYSI6ImNsZ2hlZnZpazBrdmUzZ28yOGJ4cXZ2b2gifQ.cIemK-ILf_igHsL3VBaSsw",
      attributionControl: true
    });
    map.on('load', () => {
      addLayer()
    })
  }
  function initInteraction(){

    map.on('mousedown', () => {
      console.log('mousedown')
    })
    map.on('mouseup', () => {
      console.log('mouseup')
    })
    map.on('mouseover', () => {
      console.log('mouseover')
    })
    map.on('mousemove', () => {
      console.log('mousemove')
    })
   

    map.on('preclick', () => {
      console.log('preclick')
    })
    map.on('click', () => {
      console.log('click')
    })
    map.on('dblclick', () => {
      console.log('dblclick')
    })
    
    map.on('wheel', () => {
      console.log('wheel');
    });

    map.on('idle', () => {
      console.log('A idle event occurred.');
    });

  }

  function addLayer(){
    const layerId = "fill-extrusion-layer"
    map.addLayer({
      id:layerId,
      type:"fill-extrusion",
      source:{
        type:"geojson",
        data:{
          "type": "FeatureCollection",
          "features": [
            {
              "type": "Feature",
              "properties": {
                "height": 50
              },
              "geometry": {
                "type": "Polygon",
                "coordinates": [
                  [
                    [116.46025749240465, 39.92071686143578],
                    [116.46205457244503, 39.92063046422908],
                    [116.46201165709937, 39.92006682263289],
                    [116.46024139914977, 39.9199845387995],
                    [116.46025749240465, 39.92071686143578]
                  ]
                ]
              }
            },
        ]
      }
      },
      paint:{
        "fill-extrusion-height": 50,
        "fill-extrusion-base": 10,
        "fill-extrusion-color":"red",
        "fill-extrusion-opacity": 0.5
      }
    })
    map.on('mouseenter', layerId , () => {
      console.log('layer mouseenter')
    })
    map.on('mouseleave', layerId, () => {
      console.log('layer mouseleave')
    })
    map.on('mousedown', layerId , () => {
      console.log('layer mousedown')
    })
    map.on('mouseup', layerId , () => {
      console.log('layer mouseup')
    })
    map.on('mouseover', layerId , () => {
      console.log('layer mouseover')
    })
    map.on('mousemove', layerId , () => {
      console.log('layer mousemove')
    })
    map.on('contextmenu', layerId , () => {
      console.log('layer contextmenu')
    })
  }

  initMap()
  initInteraction()
  

 
</script>